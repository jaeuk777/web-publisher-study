<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
        <style>
            li {
                list-style: none;
            }
            *{
            padding: 0;
            margin: 0;
            border: 0;
            }
            body {
                font-size: 14px;
                font-family: 'Roboto',sans-serif;
                background-color: #222831;
            }
            #recipe-detail {
                display: none;
            }
            .container {
                justify-content: center;
            width: 500px;
            height: 550px;
            margin-top: 80px;
            padding: 40px;
            box-sizing: border-box;
            background-color: #EEEEEE;
            -webkit-box-shadow: 0 5px 20px #eeeeee63, 0 1px 1px #eeeeee63;
            -moz-box-shadow: 0 5px 20px #eeeeee63, 0 1px 1px #eeeeee63;
            -ms-box-shadow: 0 5px 20px #eeeeee63, 0 1px 1px #eeeeee63;
            -o-box-shadow: 0 5px 20px #eeeeee63, 0 1px 1px #eeeeee63;
            box-shadow: 0 5px 20px #eeeeee63, 0 1px 1px #eeeeee63;
            }
            .slide {
                /* display: none; */
                /* background-color: aqua; */
                outline: none;
            }
            .slide.active {
                display: block;
            }
            img {
                max-width: 100%;
                height: auto;
            }
            .mainimg {
                width: 100px;
                height: 80px;

            }
            .slides-container {
                position: relative;
                width: 100%;
                overflow: hidden;
            }
            .slides {
                display: flex;
                transition: transform 0.5s ease-in-out;
            }
            .slide {
                min-width: 100%;
                /* box-sizing: border-box; */
            }
            .navigation {
                display: flex;
                justify-content: space-between;
                position: absolute;
                top: 50%;
                width: 100%;
            }
            .navigation button {
                background-color: #00ADB5;
                border-radius: 4px;
                padding: 5px;
                cursor: pointer;
            }
            #back-button {
                background-color: #00ADB5;
                border-radius: 4px;
                padding: 5px;
                cursor: pointer;
            }
        </style>
    </head>
        <div class="container">
            <h1>Recipes</h1>
            <ul id="recipes"></ul>
            <div id="recipe-detail">
                <h2 id="recipe-title"></h2>
                <div class="slides-container">
                    <div class="slides" id="recipe-content"></div>
                    <div class="navigation">
                        <button id="prev">Prev</button>
                        <button id="next">Next</button>
                    </div>
                </div>
                <button id="back-button">Back</button>
            </div>
            <img src="" alt="">
        </div>    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
        fetch('recipedata.json')
        .then(response => response.json())
        .then(data => {
            const recipesData = data.COOKRCP01.row;
            const recipeList = document.getElementById('recipes');
            const recipeDetail = document.getElementById('recipe-detail');
            const recipeTitle = document.getElementById('recipe-title');
            const recipeContent = document.getElementById('recipe-content');
            const backButton = document.getElementById('back-button');
            const prevButton = document.getElementById('prev');
            const nextButton = document.getElementById('next');

            // 레시피 목록 생성
            recipesData.forEach((recipe, index) => {
                const li = document.createElement('li');
                const img = document.createElement('div');
                img.innerHTML = `<img class="mainimg" src="${recipe.ATT_FILE_NO_MAIN}"/>;`
                li.textContent = recipe.RCP_NM;
                img.addEventListener('click', () => showRecipeDetail(index));
                recipeList.appendChild(img);
                recipeList.appendChild(li);
            });

            backButton.addEventListener('click', () => {
                recipeList.style.display = 'block';
                recipeDetail.style.display = 'none';
                recipeContent.style.transform = 'translateX(0%)';
                currentIndex = 0;
            });

            let currentIndex = 0;

            function showRecipeDetail(index) {
                const recipe = recipesData[index];
                recipeTitle.textContent = recipe.RCP_NM;
                recipeContent.innerHTML = '';

                // 슬라이드 콘텐츠 생성
                for (let i = 1; i <= 20; i++) {
                    const imgKey = `MANUAL_IMG${i.toString().padStart(2, '0')}`;
                    const manualKey = `MANUAL${i.toString().padStart(2, '0')}`;
                    if (recipe[imgKey] && recipe[manualKey]) {
                        const slide = document.createElement('div');
                        slide.classList.add('slide');

                        const img = document.createElement('img');
                        img.src = recipe[imgKey];
                        slide.appendChild(img);

                        const p = document.createElement('p');
                        p.textContent = recipe[manualKey];
                        slide.appendChild(p);

                        recipeContent.appendChild(slide);
                    }
                }

                recipeList.style.display = 'none';
                recipeDetail.style.display = 'block';

                // 슬라이드 초기화
                currentIndex = 0;
                updateSlides();
            }

            function updateSlides() {
                const slides = document.querySelectorAll('.slide');
                const totalSlides = slides.length;
                const percentage = -100 * currentIndex;
                recipeContent.style.transform = `translateX(${percentage}%)`;

                prevButton.disabled = currentIndex === 0;
                nextButton.disabled = currentIndex === totalSlides - 1;
            }

            prevButton.addEventListener('click', () => {
                if (currentIndex > 0) {
                    currentIndex--;
                    updateSlides();
                }
            });

            nextButton.addEventListener('click', () => {
                const totalSlides = document.querySelectorAll('.slide').length;
                if (currentIndex < totalSlides - 1) {
                    currentIndex++;
                    updateSlides();
                }
            });
        })
        .catch(error => console.error('Error fetching the recipes:', error));
});

    
    // const backAll = document.getElementById('ack-All')
    // backAll.removeEventListener('click',allEvent);

    </script>
</body>
</html>